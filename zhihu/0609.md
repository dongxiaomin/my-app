## 一. 基础配置
* react: React 框架的核心

* react-dom: react 视图渲染的核心 (基于react构建app的html页面)

* react-scripts: 脚手架为了让项目目录看起来干净一些,把webpack打包的规则及相关插件, loader等都隐藏到node_modules目录下.

    react-scripts就是脚手架中自己对打包命令的一种封装.

* "web-vitals": 性能检测

* "test": "react-scripts test"单元测试

* browserslist: 浏览器兼容

* 后期webpack打包的时候,会对这个语法进行编译, 代表public目录
```
<link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
```


## 二. 其他配置
1. 暴露配置
**命令不可逆**
```
npm run eject
```

对 @babel/preset-env语法包的重写: (es6-> es5)
让语法包可以识别react语法, 实现代码重写.
```
babel-preset-react-app"
```

2. 默认安装为sass, 安装less
```
npm add less less-loader@8
npm remove sass sass-loader
```

3. 配置别名
alias: {
    '@': paths.appSrc,
}

4. 修改域名
`npm run start`默认域名为http://localhost/, 修改域名如下配置:
```zhihu/scripts/start.js
const HOST = process.env.HOST || '127.0.0.1';
```

5. 修改端口
`npm run start`默认端口为3000, 修改端口如下配置:
``` npm i cross-dev```
```package.json
"start": "cross-env PORT=8080 node scripts/start.js",
```

6.  对ES6 内置API做兼容处理, (有内置,不用单独配置)
```
import 'react-app-polyfill/ie11';
import 'react-app-polyfill/stable';
```

7. 处理跨域
7.1 ```npm install http-proxy-middleware```
http-proxy-middleware: 实现跨域代理的模块 [`webpack-dev-server` 的跨域代理原则,也是基于它完成的.]

7.2  新建 src/setupProxy.js
<!-- API test -->
jianshu.com/asimov/subscriptions/recommended_collections
news-at.zhihu.com/api/4/news/latest

```
const { createProxyMiddleware } = require('http-proxy-middleware');

module.exports = function (app) {
    app.use(
        createProxyMiddleware('/jian',{
            target: 'https://www.jianshu.com/asimov',
            changeOrigin: true,
            ws: true,
            pathRewrite: { '^/jian': '' }
        })
    );
    app.use(
        createProxyMiddleware('/zhi',{
            target: 'https://www.news-at.zhihu.com/api/4',
            changeOrigin: true,
            ws: true,
            pathRewrite: { '^/zhi': '' }
        })
    );
};
```

测试: index.js
```
fetch('/jian/subscriptions/recommended_collections')
  .then(response => response.json())
  .then(value => {
    console.log(value);
  })
fetch('/zhi/news/latest')
  .then(response => response.json())
  .then(value => {
    console.log(value);
  })
```

